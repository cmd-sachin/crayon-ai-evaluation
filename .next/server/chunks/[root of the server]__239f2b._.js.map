{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 103, "column": 0}, "map": {"version":3,"sources":["file://D%3A/ai-eva-crayon/crayon-ai-evaluation/src/app/api/airtable/login/route.js"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport Airtable from \"airtable\";\r\n\r\nconst base = new Airtable({ apiKey: process.env.AIRTABLE_API_KEY }).base(\r\n  process.env.AIRTABLE_BASE_ID\r\n);\r\nconst TABLE_NAME = \"Candidate\";\r\n\r\nexport async function POST(request) {\r\n  try {\r\n    const { email, userKey } = await request.json();\r\n\r\n    const records = await base(TABLE_NAME)\r\n      .select({\r\n        filterByFormula: `{email} = '${email}'`,\r\n        maxRecords: 1,\r\n      })\r\n      .firstPage();\r\n\r\n    if (!records || records.length === 0) {\r\n      return NextResponse.json(\r\n        { success: false, message: \"Email not found\" },\r\n        { status: 404 }\r\n      );\r\n    }\r\n\r\n    const record = records[0];\r\n    const storedKey = record.get(\"key\");\r\n    const taskid = record.get(\"taskId\") || null;\r\n    console.log(taskid);\r\n\r\n    if (storedKey === userKey) {\r\n      return NextResponse.json({ success: true, taskid });\r\n    } else {\r\n      return NextResponse.json(\r\n        { success: false, message: \"Key does not match\" },\r\n        { status: 401 }\r\n      );\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Error in POST /login:\", error);\r\n    return NextResponse.json(\r\n      { success: false, message: error.message },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;AAAA;AACA;;;AAEA,MAAM,OAAO,IAAI,6IAAA,CAAA,UAAQ,CAAC;IAAE,QAAQ,QAAQ,GAAG,CAAC,gBAAgB;AAAC,GAAG,IAAI,CACtE,QAAQ,GAAG,CAAC,gBAAgB;AAE9B,MAAM,aAAa;AAEZ,eAAe,KAAK,OAAO;IAChC,IAAI;QACF,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG,MAAM,QAAQ,IAAI;QAE7C,MAAM,UAAU,MAAM,KAAK,YACxB,MAAM,CAAC;YACN,iBAAiB,CAAC,WAAW,EAAE,MAAM,CAAC,CAAC;YACvC,YAAY;QACd,GACC,SAAS;QAEZ,IAAI,CAAC,WAAW,QAAQ,MAAM,KAAK,GAAG;YACpC,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;gBAAO,SAAS;YAAkB,GAC7C;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,SAAS,OAAO,CAAC,EAAE;QACzB,MAAM,YAAY,OAAO,GAAG,CAAC;QAC7B,MAAM,SAAS,OAAO,GAAG,CAAC,aAAa;QACvC,QAAQ,GAAG,CAAC;QAEZ,IAAI,cAAc,SAAS;YACzB,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;gBAAE,SAAS;gBAAM;YAAO;QACnD,OAAO;YACL,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;gBAAO,SAAS;YAAqB,GAChD;gBAAE,QAAQ;YAAI;QAElB;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;YAAE,SAAS;YAAO,SAAS,MAAM,OAAO;QAAC,GACzC;YAAE,QAAQ;QAAI;IAElB;AACF"}},
    {"offset": {"line": 156, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}